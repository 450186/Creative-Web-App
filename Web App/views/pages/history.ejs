<%- include("../partials/header") %>

<% if (locations.length === 0) { %>
    <p id="errorMessage">No Locations Added</p>
    <p style="text-align: center;"">Visit <a href="home">Home</a> to add locations</p>
<% } %>
<div id="history-container">
    <% locations.forEach(location => { %>
        <div class="location-div clickable" data-lat="<%= location.latitude %>" data-long="<%= location.longitude %>">
            <div class="span2">
            <h2><%= location.country %></h2>
            <h3><%= location.city %></h3>
            </div>
            <p class="label">Start Date</p>
            <p class="value"><%= location.formattedStart %></p>

            <p class="label">End Date</p>
            <p class="value"><%= location.formattedEnd %></p>

            <p class="label">Opinions:</p>
            <p class="value"><%= location.notes %></p>
            
            <p class="label">Rating:</p>
            <p class="value"><%= location.rating %>⭐️</p>
        </div>    
    <% }) %>
</div>
<script>
    let locationDivs = document.querySelectorAll(".location-div")
    locationDivs.forEach(div =>{
        div.addEventListener("click", () => {
            const lat = div.dataset.lat;
            const long = div.dataset.long;
            window.location.href = `/location?latitude=${lat}&longitude=${long}`
        })
    })
</script>


<%- include("../partials/footer") %>